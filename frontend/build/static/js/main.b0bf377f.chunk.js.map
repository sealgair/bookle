{"version":3,"sources":["Canvas.js","ServerComponent.js","Passage.js","utils.js","Share.js","Lookup.js","Guesses.js","ModalComponent.js","Info.js","Word.js","HowTo.js","Settings.js","Statistics.js","App.js","reportWebVitals.js","i18n.js","index.js"],"names":["Canvas","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","canvas","React","createRef","image","context","current","getContext","draw","src","toDataURL","_this$props","rest","objectWithoutProperties","react_default","a","createElement","className","assign","ref","alt","title","style","width","height","Component","ServerComponent","server","crossDomain","fetch","bind","assertThisInitialized","url","success","fail","headers","Content-Type","then","res","json","result","error","console","log","Passage","state","guesses","_this2","document","addEventListener","event","setState","detail","count","_this3","lines","map","n","i","key","withTranslation","cssVar","name","getComputedStyle","body","getPropertyValue","isTouchOnly","window","matchMedia","matches","removeDiacritics","text","normalize","replace","setData","value","localStorage","setItem","JSON","stringify","getData","def","getItem","parse","_unused","Share","shareName","baseShareName","options","scoreImage","toggleOptions","shareScore","getScore","makeScore","makeScoreImage","makeScoreDescription","alertShare","setTextStyle","setSpoilerStyle","setImageStyle","setStyle","t","prev","newName","setTimeout","puzzle","order","score","concat","opener","src_Canvas","ctx","_boxColors","y","fillStyle","fillRect","font","fillText","off","maxWidth","words","split","currentLine","length","word","measureText","push","getLines","ox","forEach","line","boxColors","defineProperty","strokeStyle","x","guess","hint","author","book","translate","size","s","lineWidth","h","beginPath","moveTo","lineTo","stroke","drawCheck","year","scale","closePath","fill","drawArrow","setTransform","URL","description","num","_$0$1$guess$hint$yea","join","_pubyear","pubyear","wrong","scoreCard","splice","data","navigator","share","r","clipboard","writeText","alert","prevProps","prevState","snapshot","opacity","Math","max","children","scrollHeight","shareClass","instructions","role","aria-label","tabIndex","autoFocus","onClick","aria-hidden","aria-live","Trans","i18nKey","Lookup","books","selected","handleKeypress","handleChange","handleSelect","selectBook","handleBlur","loadBooks","filteredBooks","bcount","code","guessId","target","onSelect","id","textContent","rd","patterns","RegExp","filter","reduce","p","pat","match","filtered","self","list","classes","htmlFor","type","placeholder","aria-controls","aria-autocomplete","aria-expanded","aria-activedescendant","onBlur","onChange","onKeyDown","HINTS","_HINTS","Guesses","done","Array","isArray","dispatchGuess","guessing","handleKey","makeGuess","classList","contains","preventDefault","customEvent","CustomEvent","dispatchEvent","params","URLSearchParams","toString","sid","mapGuess","scores","lookup","button","src_Share","src_Lookup","disabled","ModalComponent","on","close","contents","onClose","inClass","element","parentElement","getTitle","Info","href","rel","Word","i18n","romanization","vert","vertical","ipa","meaning","resolvedLanguage","en","HowTo","src_Word","siteLanguages","endonym","es","fr","Settings","changeShareStyle","scoring","g","language","languageChoices","keys","lang","checked","e","changeLanguage","FIRST_EASY","Statistics","games","wins","hardWins","maxScore","cStreak","mStreak","values","hard","endsWith","substring","won","parseInt","c","distribution","App","modal","openInfo","openHelp","openSettings","openStats","closeModal","src_Passage","src_Guesses","src_Info","src_HowTo","src_Settings","src_Statistics","Date","getTimezoneOffset","reportWebVitals","onPerfEntry","Function","__webpack_require__","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","use","Backend","LanguageDetector","initReactI18next","init","debug","fallbackLng","interpolation","escapeValue","ReactDOM","createRoot","getElementById","render","StrictMode","src_App_0"],"mappings":"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","file":"static/js/main.b0bf377f.chunk.js","sourcesContent":["import React from \"react\";\n\nclass Canvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvas = React.createRef();\n        this.image = React.createRef();\n    }\n\n    componentDidMount() {\n        const context = this.canvas.current.getContext('2d');\n        this.props.draw(context);\n        this.image.current.src = this.canvas.current.toDataURL();\n    }\n\n    render() {\n        const {draw, ...rest} = this.props;\n        return <div className=\"CanvasContainer\">\n            <canvas ref={this.canvas} className=\"Hide\" {...rest}/>\n            <img ref={this.image} alt={this.props.title} style={{\n                width: this.props.width, height: this.props.height\n            }}/>\n        </div>;\n    }\n}\n\nexport default Canvas;\n","import React from \"react\";\nimport Canvas from \"./Canvas\";\n\nclass ServerComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n            // development build code\n            this.server = props.server || \"http://\" + window.location.host.split(':')[0] + \":8000\";\n            this.crossDomain = true;\n        } else {\n            // production build code\n            this.server = props.server || \"\";\n            this.crossDomain = false;\n        }\n        this.fetch = this.fetch.bind(this);\n    }\n\n    fetch(url, success, fail) {\n        let headers = {};\n        if (this.crossDomain) {\n            headers = {\n                crossDomain: true,\n                headers: {'Content-Type': 'application/json'},\n            };\n        }\n        fetch(this.server + url, headers)\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    success(result)\n                },\n                (error) => {\n                    if (fail) {\n                        fail(error);\n                    } else {\n                        console.log(error);\n                    }\n                }\n            );\n    }\n}\n\nexport default ServerComponent;\n","import React from \"react\";\nimport {withTranslation} from \"react-i18next\";\n\nclass Passage extends React.Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            guesses: 0\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('guess', event => this.setState({'guesses': event.detail.count}));\n    }\n\n    render() {\n        const lines = this.props.lines.map((n, i)=>\n            <span className={\"line\" + (i <= this.state.guesses ? \" shown\" : \"\")} key={i}>{n}</span>\n        );\n        return (\n            <div className=\"PhraseContainer\">\n                {lines}\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Passage);","const directions = [\n    \"north\",\n    \"north-northeast\",\n    \"northeast\",\n    \"east-northeast\",\n    \"east\",\n    \"east-southeast\",\n    \"southeast\",\n    \"south-southeast\",\n    \"south\",\n    \"south-southwest\",\n    \"southwest\",\n    \"west-southwest\",\n    \"west\",\n    \"west-northwest\",\n    \"northwest\",\n    \"north-northwest\",\n    \"north\",\n];\n\nfunction plural(n, singular, plural) {\n    return n == 1 ? singular : plural;\n}\n\nfunction compare(a, b) {\n    if (a < b) {\n        return -1;\n    } else if (a > b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nfunction randomInt(r, f) {\n    f = f || 0;\n    return Math.floor(Math.random() * r) + f\n}\n\nfunction randomChoice(arr) {\n    return arr[randomInt(arr.length)];\n}\n\nfunction cssVar(name) {\n    return getComputedStyle(document.body).getPropertyValue(name);\n}\n\nfunction isTouchOnly() {\n    return window.matchMedia(\"(any-hover: none)\").matches;\n}\n\nfunction isLightMode() {\n    return window.matchMedia(\"(prefers-color-scheme: light)\").matches;\n}\n\nfunction escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nfunction removeDiacritics(text) {\n    return text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n}\n\nfunction setData(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n}\n\nfunction getData(key, def) {\n    let value = localStorage.getItem(key);\n    try {\n        value = JSON.parse(value);\n    } catch {\n    }\n    if (value === null) {\n        value = def;\n    }\n    return value;\n}\n\nfunction inClass(element, className) {\n    if (element.classList.contains(className)) {\n        return true;\n    }\n    if (element.parentElement) {\n        return inClass(element.parentElement, className);\n    }\n    return false;\n}\n\nfunction getLines(ctx, text, off) {\n    const maxWidth = ctx.canvas.width - off;\n    const words = text.split(\" \");\n    let lines = [];\n    let currentLine = words[0];\n\n    for (let i = 1; i < words.length; i++) {\n        const word = words[i];\n        const width = ctx.measureText(currentLine + \" \" + word).width;\n        if (width < maxWidth) {\n            currentLine += \" \" + word;\n        } else {\n            lines.push(currentLine);\n            currentLine = word;\n        }\n    }\n    lines.push(currentLine);\n    return lines;\n}\n\nfunction drawArrow(ctx, s) {\n    const h = (s / 2);\n    ctx.beginPath();\n    ctx.moveTo(0, -h);\n    ctx.lineTo(-h, 0);\n    ctx.lineTo(-h/2, 0);\n    ctx.lineTo(-h/2, h);\n    ctx.lineTo(h/2, h);\n    ctx.lineTo(h/2, 0);\n    ctx.lineTo(h, 0);\n    ctx.closePath();\n    ctx.fill();\n}\n\nfunction drawCheck(ctx, s) {\n    ctx.lineWidth = 4;\n    const h = (s / 2);\n    ctx.beginPath();\n    ctx.moveTo(-h, 0);\n    ctx.lineTo(-2, h-2);\n    ctx.lineTo(h, -h);\n    ctx.stroke();\n}\n\nexport {\n    directions,\n    getLines,\n    drawArrow,\n    drawCheck,\n    plural,\n    compare,\n    randomInt,\n    randomChoice,\n    cssVar,\n    isTouchOnly,\n    isLightMode,\n    escapeRegExp,\n    removeDiacritics,\n    setData,\n    getData,\n    inClass\n}","import React from \"react\";\nimport {cssVar, getData, isLightMode, isTouchOnly, setData, getLines, drawArrow, drawCheck} from \"./utils\";\nimport Canvas from \"./Canvas\";\nimport {withTranslation, Trans} from \"react-i18next\";\n\nclass Share extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            style: getData(\"shareStyle\", \"text\"),\n            shareName: this.baseShareName(),\n            options: false,\n        };\n        this.options = React.createRef();\n        this.scoreImage = React.createRef();\n        this.toggleOptions = this.toggleOptions.bind(this);\n        this.shareScore = this.shareScore.bind(this);\n        this.getScore = this.getScore.bind(this);\n        this.makeScore = this.makeScore.bind(this);\n        this.makeScoreImage = this.makeScoreImage.bind(this);\n        this.makeScoreDescription = this.makeScoreDescription.bind(this);\n        this.alertShare = this.alertShare.bind(this);\n        this.setTextStyle = this.setTextStyle.bind(this);\n        this.setSpoilerStyle = this.setSpoilerStyle.bind(this);\n        this.setImageStyle = this.setImageStyle.bind(this);\n        this.setStyle = this.setStyle.bind(this);\n    }\n\n    baseShareName() {\n        const t = this.props.t;\n        const style = getData(\"shareStyle\", \"text\");\n        return style === \"image\" ? t(\"buttons.copyAlt\") : t(\"buttons.share\");\n    }\n\n    toggleOptions() {\n        this.setState(prev => ({options: !prev.options}));\n    }\n\n    alertShare(newName) {\n        this.setState({shareName: newName});\n        setTimeout(() => this.setState({shareName: this.baseShareName()}), 3000);\n    }\n\n    getScore() {\n        const scores = getData('scores');\n        return scores[this.props.puzzle.order];\n    }\n\n    makeScoreImage() {\n        const score = this.getScore();\n        const title = `Bookle #${this.props.puzzle.order}: ${score}/6`;\n        let opener = this.props.puzzle.lines[0];\n        const guesses = this.props.guesses;\n        const size = 30;\n        const ox = 10;\n        const ix = 10;\n        const oy = 30;\n        const ly = 10;\n        return <Canvas draw={function (ctx) {\n            let y = oy;\n            ctx.fillStyle = cssVar('--bg-color');\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n            ctx.fillStyle = cssVar('--text-color');\n            ctx.font = '25px';\n            ctx.fillText(title, ox, y);\n            y += 30;\n            ctx.font = '25px';\n            getLines(ctx, opener, ox * 2).forEach(function (line, i) {\n                ctx.fillText(line, ox * 2, y);\n                y += 20\n            });\n\n            const boxColors = {\n                [true]: cssVar('--correct-color'),\n                [false]: cssVar('--guess-bg-color'),\n            }\n            ctx.strokeStyle = cssVar('--text-color');\n            let x = ox + ix;\n            guesses.forEach(function (guess, i) {\n                ctx.fillStyle = boxColors[guess.hint.author];\n                ctx.fillRect(x, y, size, size);\n\n                if (guess.hint.book) {\n                    ctx.font = '18px mono';\n                    ctx.fillStyle = boxColors[true];\n                    ctx.fillRect(x, y, size, size);\n                    ctx.translate(x + size / 2, y + size / 2);\n                    drawCheck(ctx, size - 10);\n                } else {\n                    ctx.fillStyle = cssVar('--arrow-color');\n                    ctx.fillRect(x, y, size, size);\n                    ctx.fillStyle = cssVar('--text-color');\n                    ctx.translate(x + size / 2, y + size / 2);\n                    if (guess.hint.year == -1) {\n                        ctx.scale(1, -1);\n                    }\n                    drawArrow(ctx, size - 10);\n                }\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                x += size + 5;\n            });\n            y += size + ly;\n\n            ctx.fillStyle = cssVar('--text-color');\n            ctx.font = '20px';\n            ctx.fillText(document.URL, ox, y + 20);\n        }} width={(size + 1) * 6 + (ox + ix) * 2} height={(size + ly) * (guesses.length) + 70 + oy + ly}\n                       title={this.makeScoreDescription()}/>\n    }\n\n    makeScoreDescription() {\n        const t = this.props.t;\n        let description = [t('share.alt.title', {num: this.props.puzzle.order})];\n        description.push(this.props.puzzle.lines[0]);\n        const score = this.getScore();\n        if (this.props.success) {\n            description.push(t(\"share.alt.score\", {count: score}));\n        } else {\n            description.push(t(\"share.alt.miss\"));\n        }\n        this.props.guesses.forEach(function (guess, i) {\n            let line = t('share.alt.guessTitle', {num: i + 1});\n            if (guess.hint.book) {\n                line += t('share.alt.guessRight');\n            } else {\n                line += t('share.alt.author', {context: guess.hint.author ? 'right' : 'wrong'}) + ', ';\n                line += t('share.alt.year', {context: {[-1]: 'early', [0]: 'right', [1]: 'late'}[guess.hint.year]});\n            }\n            description.push(line);\n        });\n        description.push(t('share.alt.link', {url: document.URL}));\n        return description.join(\"\\n\");\n    }\n\n    makeScore() {\n        const style = this.state.style;\n        const score = this.getScore();\n        const title = `#Bookle #${this.props.puzzle.order}: ${score}/6\\n  ${this.props.puzzle.lines[0]}`;\n        if (style === \"image\") {\n            return this.makeScoreImage();\n        }\n\n        const pubyear = {\n            [-1]: '⬇️️',\n            [0]: '✅',\n            [1]: '⬆️',\n        }\n        const right = '🟩';\n        const almost = '🟧';\n        const wrong = isLightMode() ? '⬜' : '⬛';\n        let scoreCard = [];\n        if (style === \"spoiler\") {\n            scoreCard = this.props.guesses.map(function (guess) {\n                if (guess.hint.book) {\n                    return right+pubyear[0];\n                } else {\n                    let hint = [];\n                    if (guess.hint.author) {\n                        hint.push(almost);\n                    } else {\n                        hint.push(wrong);\n                    }\n                    hint.push(pubyear[guess.hint.year]+' ');\n                    hint.push(\" ||`\" + guess.book + \"`||\")\n                    return hint.join(\"\");\n                }\n            });\n        } else {\n            let score = \"📖 \" + this.props.guesses.map(function (guess) {\n                if (guess.hint.book) {\n                    return right+pubyear[0];\n                } else {\n                    return (guess.hint.author ? almost : wrong) + pubyear[guess.hint.year]\n                }\n            }).join(\" \");\n            scoreCard = [score];\n        }\n        scoreCard.splice(0, 0, title);\n        scoreCard.push(document.URL);\n        return scoreCard.join(\"\\n\");\n    }\n\n    shareScore() {\n        let data = this.makeScore();\n        if (this.state.style === \"image\") {\n            data = this.makeScoreDescription();\n        }\n        if (isTouchOnly() && this.state.style !== \"image\" && navigator.share) {\n            navigator.share({\n                title: \"Bookle\",\n                text: data,\n            }).then(r => this.alertShare(\"Shared\"));\n        } else if (navigator.clipboard) {\n            navigator.clipboard.writeText(data).then(r => this.alertShare(\"Copied\"));\n        } else {\n            alert(\"Could not copy to clipboard, copy manually here:\\n\\n\" + data);\n        }\n    }\n\n    setStyle(style) {\n        setData(\"shareStyle\", style)\n        this.setState({\n            style: style,\n            shareName: this.baseShareName(),\n        });\n    }\n\n    setTextStyle() {\n        this.setStyle(\"text\");\n    }\n\n    setSpoilerStyle() {\n        this.setStyle(\"spoiler\");\n    }\n\n    setImageStyle() {\n        this.setStyle(\"image\");\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        let height = 0;\n        let opacity = 0;\n        if (this.state.options) {\n            height = Math.max(\n                this.options.current.children[0].scrollHeight + 10,\n                this.options.current.children[1].scrollHeight,\n            ) + 'px';\n            opacity = 1;\n        }\n        this.options.current.style = \"height: \" + height + \"; opacity: \" + opacity + \";\";\n        if (this.scoreImage.current) {\n            height = 0;\n            opacity = 0;\n            if (!this.state.options) {\n                height = this.scoreImage.current.scrollHeight + 'px';\n                opacity = 1;\n            }\n            this.scoreImage.current.style = \"height: \" + height + \"; opacity: \" + opacity + \";\";\n        }\n    }\n\n    render() {\n        const t = this.props.t;\n        let shareClass = \"Guess Share\";\n        if (!this.props.success) {\n            shareClass += \" Fail\";\n        }\n        let instructions = \"\";\n        let image = \"\";\n        if (this.state.style === \"image\") {\n            instructions = t(\"share.instructions\", {\n                \"context\": isTouchOnly() ? \"tap\" : \"click\"\n            })\n            image = (<div className=\"ScoreImage Foldable\" ref={this.scoreImage}>\n                {this.makeScoreImage()}\n            </div>)\n        }\n        let score = this.makeScore();\n        if (this.state.style !== \"image\") {\n            score = <pre role=\"image\" aria-label={t(\"share.description\")}>{score}</pre>;\n        }\n        return <div className=\"ShareBox\">\n            <button tabIndex=\"0\" autoFocus className={shareClass}\n                    onClick={this.shareScore}>{this.state.shareName}</button>\n            <div className=\"ShareData Foldable\" ref={this.options} aria-hidden={this.state.options ? \"false\" : \"true\"}\n                 style={{height: 0, opacity: 0}} aria-live=\"polite\">\n                <div className=\"ShareOptions\" aria-label={t(\"share.styleChoice\")}>\n                    <button className={\"ShareOption\" + ((this.state.style === \"text\") ? \" Selected\" : \"\")}\n                            onClick={this.setTextStyle}>{t(\"share.textStyle\")}\n                    </button>\n                    <button className={\"ShareOption\" + ((this.state.style === \"spoiler\") ? \" Selected\" : \"\")}\n                            onClick={this.setSpoilerStyle}>{t(\"share.spoilerStyle\")}\n                    </button>\n                    <button className={\"ShareOption\" + ((this.state.style === \"image\") ? \" Selected\" : \"\")}\n                            onClick={this.setImageStyle}>{t(\"share.imageStyle\")}\n                    </button>\n                </div>\n                <div className=\"ShareContent\" aria-live=\"polite\">\n                    {instructions}\n                    {score}\n                </div>\n            </div>\n            {image}\n            <button className=\"ToggleShareOptions\" onClick={this.toggleOptions}>\n                <Trans i18nKey=\"share.options\">Share<br/>Options</Trans>\n            </button>\n        </div>;\n    }\n}\n\nexport default withTranslation()(Share);","import ServerComponent from \"./ServerComponent\";\nimport {compare, escapeRegExp, removeDiacritics} from \"./utils\";\nimport {withTranslation} from \"react-i18next\";\nimport React from \"react\";\n\nclass Lookup extends ServerComponent {\n\n    constructor(props) {\n        super(props);\n        this.books = [];\n        this.state = {value: \"\", selected: 0};\n\n        this.handleKeypress = this.handleKeypress.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSelect = this.handleSelect.bind(this);\n        this.selectBook = this.selectBook.bind(this);\n        this.handleBlur = this.handleBlur.bind(this);\n        this.loadBooks = this.loadBooks.bind(this);\n    }\n\n    handleKeypress(event) {\n        let selected = this.state.selected;\n        let books = this.filteredBooks();\n        let bcount = books.length;\n\n        if (event.code === \"ArrowDown\") {\n            if (selected === null) {\n                selected = bcount - 1;\n            } else {\n                selected -= 1;\n            }\n            if (selected < 0) {\n                selected = null;\n            }\n        } else if (event.code === \"ArrowUp\") {\n            if (selected === null) {\n                selected = 0;\n            } else {\n                selected += 1;\n            }\n            if (selected >= bcount) {\n                selected = null;\n            }\n        }\n        if (event.code === \"Enter\") {\n            if (selected === null) {\n                selected = 0;\n            } else {\n                let book = books[selected];\n                this.selectBook(book);\n            }\n        }\n        this.setState({selected: selected});\n    }\n\n    handleChange(event) {\n        this.guessId = null;\n        this.setState({value: event.target.value, selected: null});\n        this.props.onSelect();\n    }\n\n    handleSelect(event) {\n        this.selectBook({id: event.target.value, title: event.target.textContent});\n    }\n\n    handleBlur(event) {\n    }\n\n    selectBook(book) {\n        if (book) {\n            this.guessId = book.id;\n            this.setState({value: book.title});\n            this.props.onSelect(book);\n        }\n    }\n\n    filteredBooks() {\n        const rd = removeDiacritics;\n        const query = rd(this.state.value);\n        const patterns = query.split(\" \").map(t => new RegExp('\\\\b' + escapeRegExp(t), 'gi'));\n        return this.books.filter(book => patterns.reduce(\n            (p, pat) => p && (rd(book.title).match(pat) || rd(book.author).match(pat)),\n            true\n        ));\n    }\n\n    render() {\n        let filtered = \"\";\n        let selected = null;\n        if (!this.guessId && this.state.value) {\n            const self = this;\n            let list = this.filteredBooks().map(function (book, i) {\n                let classes = \"Book\";\n                if (i === self.state.selected) {\n                    classes += \" Selected\";\n                    selected = book;\n                }\n                return (\n                    <li className={classes} key={book.id} value={book.id} role=\"option\"\n                        onClick={self.handleSelect} id={\"book-\" + book.id}>\n                        {book.title} ({book.author})\n                    </li>);\n            });\n            filtered = (\n                <ul className=\"BookList\" id=\"books\" aria-label=\"books\" role=\"listbox\">\n                    {list}\n                </ul>\n            )\n        }\n        const t = this.props.t;\n        return (\n            <div className=\"LookupWrapper\">\n                <label className=\"Hidden\" htmlFor=\"guess-lookup\">{t(\"lookup.description\")}</label>\n                <input id=\"guess-lookup\" type=\"text\" className=\"Guess Lookup\" autoFocus role=\"combobox\"\n                       placeholder={t(\"lookup.prompt\")} value={this.state.value}\n                       aria-controls=\"Books\"\n                       aria-autocomplete=\"list\"\n                       aria-expanded={filtered ? \"true\" : \"false\"}\n                       aria-activedescendant={selected ? \"Book-\" + selected.id : \"none\"}\n                       onBlur={this.handleBlur}\n                       onChange={this.handleChange} onKeyDown={this.handleKeypress}/>\n                {filtered}\n            </div>\n        )\n    }\n\n    componentWillUnmount() {\n        this.books = [];\n    }\n\n    loadBooks() {\n        this.fetch(\"/books.json\",\n            (result) => {\n                this.books = result;\n            }\n        );\n    }\n\n    componentDidMount() {\n        this.loadBooks();\n    }\n}\n\nexport default withTranslation()(Lookup);\n","import ServerComponent from \"./ServerComponent\";\nimport {getData, setData} from \"./utils\";\nimport Share from \"./Share\";\nimport React from \"react\";\nimport Lookup from \"./Lookup\";\nimport {withTranslation} from \"react-i18next\";\n\nconst HINTS = {\n    [-1]: 'fa-arrow-down',\n    [1]: 'fa-arrow-up',\n    [0]: 'fa-check',\n    [true]: 'fa-check',\n    [false]: 'fa-xmark',\n}\n\nclass Guesses extends ServerComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        let done = false;\n        let success = false;\n        let guesses = [];\n        if (this.props.puzzle) {\n            let data = getData('guess' + this.props.puzzle.order);\n            if (Array.isArray(data)) {\n                guesses = data;\n                success = guesses[guesses.length - 1].success;\n                done = success || guesses.length >= 6;\n                this.dispatchGuess(guesses.length);\n            }\n        }\n        this.state = {\n            guess: null,\n            guesses: guesses,\n            guessing: false,\n            done: done,\n            success: success,\n        };\n        this.onSelect = this.onSelect.bind(this);\n        this.handleKey = this.handleKey.bind(this);\n        this.makeGuess = this.makeGuess.bind(this);\n    }\n\n    onSelect(guess) {\n        this.setState({\n            guess: guess,\n            done: guess ? guess.success : false,\n        });\n    }\n\n    handleKey(event) {\n        if (this.state.guess && event.code === \"Enter\" && event.target.classList.contains(\"Lookup\")) {\n            this.makeGuess();\n            event.preventDefault();\n        }\n    }\n\n    dispatchGuess(count) {\n        const customEvent = new CustomEvent('guess', { detail: { count: count } });\n        document.dispatchEvent(customEvent);\n    }\n\n    makeGuess() {\n        if (this.state.guessing) {\n            return;\n        }\n        const params = new URLSearchParams({\n            book: this.state.guess.id,\n            puzzle: this.props.puzzle.id,\n        }).toString();\n        this.setState({'guessing': true});\n        this.fetch(\"/guess.json?\" + params,\n            (result) => {\n                let guesses = this.state.guesses;\n                guesses.push(result);\n                let done = result.success || guesses.length >= 6;\n                this.setState({\n                    guesses: guesses,\n                    guessing: false,\n                    done: done,\n                    success: result.success,\n                    guess: null,\n                    sid: result.sid,\n                    mapGuess: null,\n                });\n                this.dispatchGuess(guesses.length);\n\n                if (this.props.puzzle.order) {\n                    setData('guess' + this.props.puzzle.order, this.state.guesses);\n                    if (done) {\n                        let scores = getData('scores') || {};\n                        let score;\n                        if (result.success) {\n                            score = guesses.length;\n                        } else {\n                            score = 'X';\n                        }\n                        scores[this.props.puzzle.order] = score;\n                        setData('scores', scores);\n                    }\n                }\n            },\n            (error) => {\n                this.setState({guessing: false});\n            }\n        );\n    }\n\n    render() {\n        const t = this.props.t;\n\n        const numbers = [0, 1, 2, 3, 4, 5];\n        const guesses = numbers.map(n => this.state.guesses[n] || false);\n        const data = guesses.map(function (guess, n) {\n            if (guess) {\n                return (<li className=\"Guess Hints\" key={n}>\n                    <div className=\"author hint\">\n                        {guess.author}\n                        <i className={`icon fa-solid ${HINTS[guess.hint.author]}`}></i>\n                    </div>\n                    <div className=\"bookTitle hint\">\n                        {guess.book}\n                        <i className={`icon fa-solid ${HINTS[guess.hint.book]}`}></i>\n                    </div>\n                    <div className=\"year hint\" title={t('guess.yearHint', {\n                        context: {[-1]: 'early', [0]: 'right', [1]: 'late'}[guess.hint.year]\n                    })}>\n                        {guess.year}\n                        <i className={`icon fa-solid ${HINTS[guess.hint.year]}`}></i>\n                    </div>\n                </li>);\n            } else {\n                return (<li className=\"Guess Empty\" key={n}/>);\n            }\n        });\n\n        let lookup = \"\";\n        let button = \"\";\n        if (this.state.done) {\n            button = <Share success={this.state.success} guesses={this.state.guesses}\n                            puzzle={this.props.puzzle}/>;\n        } else {\n            lookup = <Lookup onSelect={this.onSelect} key={this.state.guesses.length}/>;\n            button = <button tabIndex=\"0\" className=\"MakeGuess Guess\" onClick={this.makeGuess}\n                             disabled={this.state.guessing || !this.state.guess}>{t('buttons.guess')}</button>;\n        }\n\n        return <div className=\"GuessWrapper\">\n            <ul className=\"Guesses\">\n                {data}\n            </ul>\n            <div className=\"LookupSection\" onKeyDown={this.handleKey}>\n                {lookup}\n                {button}\n            </div>\n        </div>\n    }\n}\n\nclass Solution extends React.Component {\n    render() {\n        return (\n            <div className=\"LookupWrapper\" aria-live=\"polite\">\n                <input type=\"text\" className=\"Guess Lookup\" aria-label=\"correct answer\"\n                       disabled value={this.props.answer}/>\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Guesses);","import React from \"react\";\nimport {inClass} from \"./utils\";\n\nclass ModalComponent extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n        this.state = {on: false};\n        this.close = this.close.bind(this);\n        this.onClick = this.onClick.bind(this);\n        this.contents = this.contents.bind(this);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return {on: props.on};\n    }\n\n    getTitle() {\n        return \"Modal\";\n    }\n\n    close(event) {\n        this.props.onClose(event);\n    }\n\n    onClick(event) {\n        if (inClass(event.target, \"Close\") || event.target.classList.contains(\"Overlay\")) {\n            this.close();\n        }\n    }\n\n    render() {\n        const t = this.props.t || ((s) => s); // needs to be injected in subclasses\n        let opacity = this.state.on ? 1 : 0;\n        let height = this.state.on ? \"100vh\" : 0;\n        return (\n            <div className=\"Overlay\" onClick={this.onClick} style={{\n                opacity: opacity, height: height\n            }} aria-hidden={this.state.on ? \"false\" : \"true\"} aria-live=\"polite\">\n                <div className=\"ModalContainer\">\n                    <h1>{this.getTitle()}</h1>\n                    <hr/>\n                    {this.contents()}\n                    <a className=\"Close Icon\">\n                        <span className=\"Description\">{t('buttons.close')}</span>\n                        <i className=\"fa-solid fa-circle-xmark\"></i>\n                    </a>\n                </div>\n            </div>\n        )\n    }\n\n    contents() {\n    }\n}\n\nexport default ModalComponent;","import React from \"react\";\nimport ModalComponent from \"./ModalComponent\";\nimport {withTranslation} from \"react-i18next\";\n\nclass Info extends ModalComponent {\n    getTitle() {\n        return this.props.t(\"titles.info\");\n    }\n\n    contents() {\n        const t = this.props.t;\n        return <div className=\"InfoContent\">\n            <p>{t(\"info.credit\")}</p>\n            <p>\n                <a href=\"https://github.com/sealgair/lingule\" target=\"_new\">\n                    <i className=\"fa-brands fa-github Icon\"></i>\n                    {t(\"info.code\")}\n                </a>\n            </p>\n            <p>\n                <a href=\"https://twitter.com/ChaseCaster\" target=\"_new\">\n                    <i className=\"fa-brands fa-twitter Icon\"></i>\n                    {t(\"info.tweet\")}\n                </a>\n            </p>\n            <p>\n                <a rel=\"me\" href=\"https://weirder.earth/@chase\" target=\"_new\">\n                    <i className=\"fa-brands fa-mastodon Icon\"></i>\n                    {t(\"info.toot\")}\n                </a>\n            </p>\n            <p>\n                {t(\"info.bugs\")}\n            </p>\n        </div>;\n    }\n}\n\nexport default withTranslation()(Info);","import React from \"react\";\nimport {withTranslation} from \"react-i18next\";\n\nclass Word extends React.Component {\n    render() {\n        const t = this.props.t;\n        const i18n = this.props.i18n;\n        let romanization = \"\";\n        if (this.props.romanization) {\n            romanization = <div id=\"romanization\" className=\"ToolTip Side\"\n                                title={t(\"tips.romanization\")}>{this.props.romanization}</div>;\n        }\n        let vert = this.props.vertical ? \"vertical\" : \"\";\n        return (\n            <div className=\"WordContainer\">\n                <span id=\"word\" className={`ToolTip Side ${vert}`} title={t(\"tips.word\")}>{this.props.word}</span>\n                {romanization}\n                <span id=\"ipa\" className=\"ToolTip Side\" title={t(\"tips.ipa\")}>{this.props.ipa}</span>\n                <span id=\"meaning\" className=\"ToolTip Side\" title={t(\"tips.meaning\")}>\n                    {this.props.meaning[i18n.resolvedLanguage] || this.props.meaning.en}\n                </span>\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Word);","import Word from \"./Word\";\nimport React from \"react\";\nimport ModalComponent from \"./ModalComponent\";\nimport {withTranslation, Trans} from \"react-i18next\";\n\nclass HowTo extends ModalComponent {\n    getTitle() {\n        return this.props.t(\"titles.how-to\");\n    }\n\n    contents() {\n        const t = this.props.t;\n        return (\n            <div>\n                <p><Trans i18nKey=\"howto.intro\">\n                    Every day you'll get a new <span className=\"Title\">Lingule</span>. You get six guesses to\n                    figure out what language the mystery word is.\n                </Trans></p>\n                <Word word={t(\"howto.target\")} romanization={t(\"howto.romanization\")}\n                      ipa={t(\"howto.ipa\")} meaning={t(\"howto.meaning\")}/>\n                <p>{t(\"howto.afterGuess\")}</p>\n                <ul className=\"HelpList\">\n                    <li>\n                        <i className=\"fa-solid fa-earth-asia\"></i>\n                        {t(\"howto.macroArea\")}\n                    </li>\n                    <li>\n                        <i className=\"fa-solid fa-mountain-sun\"></i>\n                        {t(\"howto.family\")}\n                    </li>\n                    <li>\n                        <i className=\"fa-solid fa-mountain\"></i>\n                        {t(\"howto.subFamily\")}\n                    </li>\n                    <li>\n                        <i className=\"fa-solid fa-mound\"></i>\n                        {t(\"howto.genus\")}\n                    </li>\n                    <li>\n                        <i className=\"fa-regular fa-comments\"></i>\n                        {t(\"howto.language\")}\n                    </li>\n                    <li>\n                        <i className=\"fa-regular fa-compass\"></i>\n                        {t(\"howto.direction\")}\n                    </li>\n                </ul>\n                <p>{t(\"howto.isolates\")}</p>\n                <p>{t(\"howto.multiMatch\")}</p>\n                <p>{t(\"howto.directionMeans\")}</p>\n                <p>\n                    <Trans i18nKey=\"howto.dataSource\">\n                        All language data is supplied by <a href=\"https://wals.info/languoid\" target=\"_new\">The World\n                        Atlas of Language Structures</a>\n                    </Trans>\n                </p>\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(HowTo);","import {getData, setData} from \"./utils\";\nimport {withTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport ModalComponent from \"./ModalComponent\";\n\nconst siteLanguages = {\n  en: { endonym: 'English' },\n  es: { endonym: 'Español' },\n  fr: { endonym: 'Français' },\n};\n\nclass Settings extends ModalComponent {\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            share: getData(\"shareStyle\", \"text\"),\n        }\n        this.changeShareStyle = this.changeShareStyle.bind(this);\n    }\n\n    getTitle() {\n        return this.props.t(\"titles.settings\");\n    }\n\n    changeShareStyle(event) {\n        let style = event.target.value;\n        setData('shareStyle', style);\n        this.setState({share: style});\n    }\n\n    contents() {\n        const t = this.props.t;\n        const i18n = this.props.i18n;\n        const guesses = []; // TODO\n        const guessing = guesses && guesses.length < 6 && guesses.filter(g => g.hint.language).length === 0;\n        const scoring = guessing || !guesses;\n\n        const languageChoices = Object.keys(siteLanguages).map(lang=>\n            <li key={lang}><label>\n                <input type=\"radio\" name=\"language\" value={lang}\n                       checked={i18n.resolvedLanguage === lang}\n                       onChange={(e) => {\n                           if (e.target.checked) {\n                               i18n.changeLanguage(lang)\n                           }\n                       }}\n                />\n                {siteLanguages[lang].endonym}\n            </label></li>\n        )\n\n        return (<div>\n            <fieldset>\n                <legend>{t(\"settings.sharing\")}</legend>\n                <span>{scoring ? \"\" : t(\"settings.shareHint\")}</span>\n                <ul>\n                    <li><label><input type=\"radio\" name=\"style\" value=\"text\"\n                                      onChange={this.changeShareStyle}\n                                      disabled={!scoring}\n                                      checked={this.state.share === \"text\"}/>\n                        {t(\"settings.shareText\")}\n                    </label></li>\n                    <li><label><input type=\"radio\" name=\"style\" value=\"spoiler\"\n                                      onChange={this.changeShareStyle}\n                                      disabled={!scoring}\n                                      checked={this.state.share === \"spoiler\"}/>\n                        {t(\"settings.shareSpoilers\")}\n                    </label></li>\n                    <li><label><input type=\"radio\" name=\"style\" value=\"image\"\n                                      onChange={this.changeShareStyle}\n                                      disabled={!scoring}\n                                      checked={this.state.share === \"image\"}/>\n                        {t(\"settings.shareImage\")}\n                    </label></li>\n                </ul>\n            </fieldset>\n            <br/>\n            <fieldset>\n                <legend>{t(\"settings.language\")}</legend>\n                <ul>\n                    {languageChoices}\n                </ul>\n                <p>{t(\"settings.languageDisclaimer\")}</p>\n            </fieldset>\n        </div>)\n    }\n}\n\nexport default withTranslation()(Settings);\n","import React from \"react\";\nimport {getData, plural} from \"./utils\";\nimport ModalComponent from \"./ModalComponent\";\nimport {withTranslation} from \"react-i18next\";\n\nconst FIRST_EASY = 11;\n\nclass Statistics extends ModalComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        const scores = getData('scores') || {};\n        this.games = Object.keys(scores).length;\n        this.wins = 0;\n        this.hardWins = 0;\n        this.maxScore = 0;\n        this.scores = {};\n        const self = this;\n\n        // Calculate streaks\n        this.cStreak = 0;\n        this.mStreak = 0;\n\n        Object.values(scores).forEach(function (s, i) {\n            let hard = s.toString().endsWith(\"*\");\n            if (hard) {\n                s = s.substring(0, s.length - 1);\n            }\n            let won = s !== 'X';\n            if (won) {\n                s = parseInt(s);\n            }\n            let c = self.scores[s] || 0;\n            self.scores[s] = c + 1;\n            self.maxScore = Math.max(self.maxScore, self.scores[s]);\n            if (won) {\n                self.wins += 1;\n                if (hard || i < FIRST_EASY) {\n                    self.hardWins += 1;\n                }\n            }\n            if (s === 'X') {\n                self.cStreak = 0;\n            } else {\n                self.cStreak += 1;\n            }\n            self.mStreak = Math.max(self.cStreak, self.mStreak);\n        });\n\n        this.onClick = this.onClick.bind(this);\n    }\n\n    getTitle() {\n        return this.props.t(\"titles.stats\");\n    }\n\n    contents() {\n        const t = this.props.t;\n        let distribution = <h4>{t('stats.empty')}</h4>;\n        if (Object.keys(this.scores).length > 0) {\n            const scores = [1, 2, 3, 4, 5, 6]\n                .map(s => this.scores[s] || 0)\n                .map((s, i) =>\n                    <li style={{width: (s / this.maxScore * 100) + '%'}} key={i}\n                        aria-label={t('stats.graphLabelA', {count: s}) + t('stats.graphLabelB', {count: i+1})}>\n                        <div className=\"GraphLabel\" aria-hidden=\"true\">{s}</div>\n                    </li>\n                );\n            distribution = (\n                <ol className=\"Distribution\" aria-label={t('stats.distribution')}>\n                    {scores}\n                </ol>\n            )\n        }\n        return (\n            <div>\n                <div className=\"StatsList\">\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.games}</span>\n                        <span className=\"StatLabel\">{t(\"stats.games\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.wins}</span>\n                        <span className=\"StatLabel\">{t(\"stats.wins\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.hardWins}</span>\n                        <span className=\"StatLabel\">{t(\"stats.hardWins\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.cStreak}</span>\n                        <span className=\"StatLabel\">{t(\"stats.thisStreak\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.mStreak}</span>\n                        <span className=\"StatLabel\">{t(\"stats.maxStreak\")}</span>\n                    </div>\n                </div>\n                <h2>{t(\"stats.distribution\")}</h2>\n                <hr/>\n                {distribution}\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Statistics);","import React from 'react'\nimport {withTranslation} from \"react-i18next\";\n\nimport ServerComponent from \"./ServerComponent\";\nimport Passage from \"./Passage\";\nimport Guesses from \"./Guesses\";\n\nimport './App.css';\nimport Info from \"./Info\";\nimport HowTo from \"./HowTo\";\nimport Settings from \"./Settings\";\nimport Statistics from \"./Statistics\";\n\nclass App extends ServerComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            puzzle: {\n                lines: [\n                    \"Welcome to Bookle!\"\n                ]\n            },\n            modal: null,\n        }\n\n        this.openInfo = this.openInfo.bind(this);\n        this.openHelp = this.openHelp.bind(this);\n        this.openSettings = this.openSettings.bind(this);\n        this.openStats = this.openStats.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n    }\n\n    openInfo() {\n        this.setState({modal: \"info\"});\n    }\n\n    openHelp() {\n        this.setState({modal: \"help\"});\n    }\n\n    openSettings() {\n        this.setState({modal: \"settings\"});\n    }\n\n    openStats() {\n        this.setState({modal: \"stats\"});\n    }\n\n    closeModal() {\n        this.setState({modal: null});\n    }\n\n    render() {\n        let t = this.props.t;\n        let font = \"\";\n        return (\n            <div className=\"Container\">\n                {font}\n                <div className=\"MainColumn\" aria-hidden={this.state.modal ? \"true\" : \"false\"}>\n                    <div className=\"Buffer\"/>\n                    <div className=\"ContentWrapper\">\n                        <header className=\"Header\">\n                            <span className=\"IconSet Left\">\n                                <a className=\"Help Icon TipBelow\" title={t(\"titles.how-to\")} onClick={this.openHelp}>\n                                    <i className=\"fa-solid fa-circle-question\"></i>\n                                </a>\n                                <a className=\"Info Icon TipBelow\" title={t(\"titles.credits\")} onClick={this.openInfo}>\n                                    <i className=\"fa-solid fa-circle-info\"></i>\n                                </a>\n                            </span>\n                            <h1>Bookle</h1>\n                            <span className=\"IconSet Right\">\n                                <a className=\"Settings Icon TipBelow\" title={t(\"titles.settings\")} onClick={this.openSettings}>\n                                    <i className=\"fa-solid fa-gear\"></i>\n                                </a>\n                                <a className=\"Stats Icon TipBelow\" title={t(\"titles.score\")} onClick={this.openStats}>\n                                    <i className=\"fa-solid fa-square-poll-horizontal\"></i>\n                                </a>\n                            </span>\n                        </header>\n                        <Passage lines={this.state.puzzle.lines}/>\n                        <div className=\"Body\">\n                            <Guesses puzzle={this.state.puzzle} key={this.state.puzzle.order}/>\n                        </div>\n                    </div>\n                </div>\n                <Info on={this.state.modal === \"info\"} onClose={this.closeModal}/>\n                <HowTo on={this.state.modal === \"help\"} onClose={this.closeModal}/>\n                <Settings on={this.state.modal === \"settings\"} word={this.state.word} onClose={this.closeModal}/>\n                <Statistics on={this.state.modal === \"stats\"} onClose={this.closeModal}/>\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        this.fetch(\"/today.json?tz=\" + new Date().getTimezoneOffset(),\n            (result) => {\n                this.setState({\n                    puzzle: result,\n                });\n            });\n    }\n}\n\nexport default withTranslation()(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport Backend from 'i18next-http-backend';\n\ni18n\n  // i18next-http-backend\n  // loads translations from your server\n  // https://github.com/i18next/i18next-http-backend\n  .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    debug: true,\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    }\n  });\n\n// new usage\n// i18n.services.formatter.add('DATE_HUGE', (value, lng, options) => {\n//   return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime.DATE_HUGE)\n// });\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18n';\n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}